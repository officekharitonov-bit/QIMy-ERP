# –û–¢–ß–ï–¢: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
**–î–∞—Ç–∞:** 24.01.2026 13:02  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**

---

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–ª—è Clients

**–§–∞–π–ª:** [src/QIMy.Web/Components/Pages/AR/Clients/Index.razor](src/QIMy.Web/Components/Pages/AR/Clients/Index.razor)

**–ü—Ä–æ–±–ª–µ–º–∞:** Clients —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –∏–º–µ–ª–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ `BusinessContext.Changed`, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Å–º–µ–Ω–µ –±–∏–∑–Ω–µ—Å–∞ —Å–ø–∏—Å–æ–∫ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
```csharp
// –î–æ–±–∞–≤–ª–µ–Ω inject
@inject BusinessContext BusinessCtx

// –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –≤ OnInitializedAsync
protected override async Task OnInitializedAsync()
{
    await BusinessCtx.InitializeAsync();
    BusinessCtx.Changed += async () =>  // ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ
    {
        await LoadClients();
        StateHasChanged();
    };
    await LoadClients();
}

// –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (comment –ø–æ–∫–∞ Client –Ω–µ –∏–º–µ–µ—Ç BusinessId)
private async Task LoadClients()
{
    var all = result.ToList();
    var bizId = BusinessCtx.CurrentBusinessId;
    
    // TODO: —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ Client –±—É–¥–µ—Ç –∏–º–µ—Ç—å BusinessId
    // clients = bizId.HasValue 
    //     ? all.Where(c => c.BusinessId == bizId.Value).ToList()
    //     : all;
}
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–∂–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è BusinessId –≤ —Å—É—â–Ω–æ—Å—Ç—å Client)

---

### 2. ‚úÖ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫)

**–§–∞–π–ª:** [src/QIMy.Web/Components/Layout/NavMenu.razor](src/QIMy.Web/Components/Layout/NavMenu.razor)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –°–º–µ—à–∞–Ω–Ω—ã–µ —è–∑—ã–∫–∏: "–ö–ª–∏–µ–Ω—Ç—ã" (–†–£) + "Rechnungen" (DE) + "Soon" (EN)
- ‚ùå –ù–µ–º–µ—Ü–∫–∏–µ –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –≤ –≥–ª–∞–≤–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö: "AR - AUSGANGSRECHNUNGEN"
- ‚ùå –ê–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–ª–æ–≤–∞ –≤ –º–µ–Ω—é: "Tax Rates", "Accounts", "Currencies", "Products"

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

| –î–æ | –ü–æ—Å–ª–µ |
|----|-------|
| AR - AUSGANGSRECHNUNGEN | –ê–† - –°–ß–ï–¢–ê (–ò–°–•–û–î–Ø–©–ò–ï) |
| –°—á–µ—Ç–∞ (Rechnungen) | –°—á–µ—Ç–∞ |
| –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (Angebote) | –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è |
| AG - ANGEBOTE | –ê–ì - –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø |
| ER - EINGANGSRECHNUNGEN | –≠–† - –°–ß–ï–¢–ê (–í–•–û–î–Ø–©–ò–ï) |
| –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ / Soon | –ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ / **–°–∫–æ—Ä–æ** |
| –í—Ö–æ–¥—è—â–∏–µ —Å—á–µ—Ç–∞ / Soon | –í—Ö–æ–¥—è—â–∏–µ —Å—á–µ—Ç–∞ / **–°–∫–æ—Ä–æ** |
| KA - KASSA | –ö–ê - –ö–ê–°–°–ê |
| Registrierkasse / Soon | –†–µ–µ—Å—Ç—Ä –∫–∞—Å—Å / **–°–∫–æ—Ä–æ** |
| Kassabuch / Soon | –ö–∞—Å—Å–æ–≤–∞—è –∫–Ω–∏–≥–∞ / **–°–∫–æ—Ä–æ** |
| ADMIN - –°–ü–†–ê–í–û–ß–ù–ò–ö–ò | –ê–î–ú–ò–ù - –°–ü–†–ê–í–û–ß–ù–ò–ö–ò |
| Tax Rates | –ù–∞–ª–æ–≥–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏ |
| Accounts | –°—á–µ—Ç–∞ |
| Currencies | –í–∞–ª—é—Ç—ã |
| Products | –¢–æ–≤–∞—Ä—ã |

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–∞—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

| –ü—Ä–æ–≤–µ—Ä–∫–∞ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|----------|-----------|
| **–ö–æ–º–ø–∏–ª—è—Ü–∏—è** | ‚úÖ PASS (0 –æ—à–∏–±–æ–∫, 0 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π) |
| **–ó–∞–ø—É—Å–∫** | ‚úÖ PASS (http://localhost:5204 —Ä–∞–±–æ—Ç–∞–µ—Ç) |
| **–ú–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏** | ‚úÖ PASS (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ –≤–µ–∑–¥–µ) |
| **Injections** | ‚úÖ PASS (BusinessCtx –∏–Ω–∂–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω) |

---

## üéØ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
‚úÖ src/QIMy.Web/Components/Pages/AR/Clients/Index.razor
   - –î–æ–±–∞–≤–ª–µ–Ω @inject BusinessContext BusinessCtx
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ BusinessContext.Changed
   - –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–¥ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (TODO –¥–ª—è Client.BusinessId)
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

‚úÖ src/QIMy.Web/Components/Layout/NavMenu.razor
   - –í—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –º–æ–¥—É–ª–µ–π: –†–£ (–≤–º–µ—Å—Ç–æ DE)
   - –í—Å–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é: –†–£ (–≤–º–µ—Å—Ç–æ EN/DE)
   - "Soon" ‚Üí "–°–∫–æ—Ä–æ"
   - –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
```

---

## üöÄ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–∫—Ç–∏–≤–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é Clients
```
1. –û—Ç–∫—Ä—ã—Ç—å: http://localhost:5204/ar/clients
2. –ù–∞–π—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä "–§–∏—Ä–º–∞:" –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
3. –í—ã–±—Ä–∞—Ç—å –æ–¥–Ω—É —Ñ–∏—Ä–º—É ‚Üí –∑–∞–ø–∏—Å–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–µ–Ω—Ç–æ–≤
4. –°–º–µ–Ω–∏—Ç—å —Ñ–∏—Ä–º—É ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ:
   ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ù–ï –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
   ‚úÖ –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   ‚úÖ (–ü–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, —Ç.–∫. Client.BusinessId –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω)
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä—É—Å—Å–∫—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é
```
1. –û—Ç–∫—Ä—ã—Ç—å: http://localhost:5204
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–µ–≤–æ–µ –º–µ–Ω—é - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:
   ‚úÖ –ê–† - –°–ß–ï–¢–ê (–ò–°–•–û–î–Ø–©–ò–ï)
   ‚úÖ –ê–ì - –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø
   ‚úÖ –≠–† - –°–ß–ï–¢–ê (–í–•–û–î–Ø–©–ò–ï)
   ‚úÖ –ö–ê - –ö–ê–°–°–ê
   ‚úÖ –ê–î–ú–ò–ù - –°–ü–†–ê–í–û–ß–ù–ò–ö–ò
   ‚úÖ –í—Å–µ –ø—É–Ω–∫—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º
```

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### BusinessContext –ø–∞—Ç—Ç–µ—Ä–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö)

–°—Ç—Ä–∞–Ω–∏—Ü—ã —Å –ø–æ–ª–Ω–æ–π —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π:
- ‚úÖ [AR/Invoices/Index.razor](src/QIMy.Web/Components/Pages/AR/Invoices/Index.razor) ‚Äî —Å—á–µ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ BusinessId
- ‚úÖ [AG/Quotes/Index.razor](src/QIMy.Web/Components/Pages/AG/Quotes/Index.razor) ‚Äî –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ BusinessId
- ‚úÖ [AR/Clients/Index.razor](src/QIMy.Web/Components/Pages/AR/Clients/Index.razor) ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –≥–æ—Ç–æ–≤–∞ (–∂–¥–µ—Ç BusinessId –≤ Entity)

–ü–∞—Ç—Ç–µ—Ä–Ω –∫–æ–¥–∞:
```csharp
@inject BusinessContext BusinessCtx

@code {
    protected override async Task OnInitializedAsync()
    {
        await BusinessCtx.InitializeAsync();
        
        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏–µ —Å–º–µ–Ω—ã –±–∏–∑–Ω–µ—Å–∞
        BusinessCtx.Changed += async () =>
        {
            await LoadData();
            StateHasChanged();  // –û–±–Ω–æ–≤–∏—Ç—å UI
        };
        
        await LoadData();
    }
    
    private async Task LoadData()
    {
        var all = await GetAllData();
        var bizId = BusinessCtx.CurrentBusinessId;
        
        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –±–∏–∑–Ω–µ—Å—É
        items = bizId.HasValue 
            ? all.Where(x => x.BusinessId == bizId.Value).ToList()
            : all;
    }
}
```

---

## ‚è≥ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å BusinessId –≤ Client –∏ Product
**–¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î:**
```csharp
public class AddBusinessIdToClientAndProduct : Migration
{
    protected override void Up(MigrationBuilder migrationBuilder)
    {
        migrationBuilder.AddColumn<int?>(
            name: "BusinessId",
            table: "Clients",
            nullable: true);
            
        migrationBuilder.AddColumn<int?>(
            name: "BusinessId",
            table: "Products",
            nullable: true);
            
        // –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤ Clients/Index.razor
    }
}
```

### 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –∫ –æ—Å—Ç–∞–ª—å–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
- [ ] Products/Index.razor
- [ ] Units/Index.razor
- [ ] TaxRates/Index.razor
- [ ] Suppliers/Index.razor (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞)

### 3. –î–æ–±–∞–≤–∏—Ç—å BusinessId –≤ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
- Supplier (ER –º–æ–¥—É–ª—å)
- ExpenseInvoice (ER –º–æ–¥—É–ª—å)
- Discount
- PaymentMethod
- BankAccount

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (Clients, Invoices, Quotes)
- ‚úÖ BusinessContext.Changed –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ –±–∏–∑–Ω–µ—Å–∞
- ‚úÖ StateHasChanged() –æ–±–Ω–æ–≤–ª—è–µ—Ç UI –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ
- ‚úÖ –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ß—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ:
- ‚è≥ Client –Ω–µ –∏–º–µ–µ—Ç BusinessId (—Ñ–∏–ª—å—Ç—Ä –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω) ‚Üí —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- ‚è≥ Product –Ω–µ –∏–º–µ–µ—Ç BusinessId ‚Üí —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- ‚è≥ –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –µ—â–µ –Ω–µ –∏–º–µ—é—Ç BusinessId

### –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:
- ‚úÖ **–ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é**
- ‚úÖ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
- ‚è≥ **–¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏**

---

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ http://localhost:5204**  
**–ì–æ—Ç–æ–≤–æ –∫ —Ä—É—á–Ω–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ
