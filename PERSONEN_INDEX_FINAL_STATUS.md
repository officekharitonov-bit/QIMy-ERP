# ‚úÖ PERSONEN INDEX ER/AR INTEGRATION - FINAL REPORT

**–î–∞—Ç–∞:** 24 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–ù–û**
**–°–±–æ—Ä–∫–∞:** ‚úÖ **0 –æ—à–∏–±–æ–∫, 0 warning**
**–ë–î –º–∏–≥—Ä–∞—Ü–∏—è:** ‚úÖ **–ü–†–ò–ú–ï–ù–ï–ù–ê**

---

## üìä –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                            ‚ïë
‚ïë     ‚úÖ –ê–†–•–ò–¢–ï–ö–¢–£–†–ê PERSONEN INDEX ER/AR –ó–ê–í–ï–†–®–ï–ù–ê        ‚ïë
‚ïë                                                            ‚ïë
‚ïë  ‚Ä¢ Entity PersonenIndexEntry       ‚úÖ –°–æ–∑–¥–∞–Ω–∞ (203 –ª–∏–Ω–∏–π)  ‚ïë
‚ïë  ‚Ä¢ ExpenseInvoice (ER) –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞            ‚ïë
‚ïë  ‚Ä¢ Invoice (AR) –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è         ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞            ‚ïë
‚ïë  ‚Ä¢ ApplicationDbContext            ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞            ‚ïë
‚ïë  ‚Ä¢ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞                ‚úÖ –ì–æ—Ç–æ–≤–∞               ‚ïë
‚ïë  ‚Ä¢ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞              ‚úÖ –í –ë–î                 ‚ïë
‚ïë  ‚Ä¢ –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω                   ‚úÖ –ë–ï–ó –û–®–ò–ë–û–ö         ‚ïë
‚ïë  ‚Ä¢ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è                    ‚úÖ 4 —Ñ–∞–π–ª–∞              ‚ïë
‚ïë  ‚Ä¢ –î–∏–∞–≥—Ä–∞–º–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã           ‚úÖ –ì–æ—Ç–æ–≤—ã               ‚ïë
‚ïë                                                            ‚ïë
‚ïë  –†–ï–ó–£–õ–¨–¢–ê–¢: –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ ‚úÖ                    ‚ïë
‚ïë                                                            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### ‚úÖ –ù–û–í–´–ï –§–ê–ô–õ–´ (5 —Ñ–∞–π–ª–æ–≤)

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|---------|
| [src/QIMy.Core/Entities/PersonenIndexEntry.cs](src/QIMy.Core/Entities/PersonenIndexEntry.cs) | 203 –ª–∏–Ω–∏–π | –ì–ª–∞–≤–Ω–∞—è Entity —Ä–µ–µ—Å—Ç—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ |
| [docs/PERSONEN_INDEX_ER_AR_ARCHITECTURE.md](docs/PERSONEN_INDEX_ER_AR_ARCHITECTURE.md) | 260 –ª–∏–Ω–∏–π | –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã |
| [PERSONEN_INDEX_IMPLEMENTATION_COMPLETE.md](PERSONEN_INDEX_IMPLEMENTATION_COMPLETE.md) | 320 –ª–∏–Ω–∏–π | –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ |
| [PERSONEN_INDEX_QUICK_REFERENCE.md](PERSONEN_INDEX_QUICK_REFERENCE.md) | 140 –ª–∏–Ω–∏–π | –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ |
| [ARCHITECTURE_DIAGRAM_PERSONEN_INDEX.txt](ARCHITECTURE_DIAGRAM_PERSONEN_INDEX.txt) | 400 –ª–∏–Ω–∏–π | ASCII –¥–∏–∞–≥—Ä–∞–º–º—ã –∏ –ø—Ä–∏–º–µ—Ä—ã |

### ‚úÖ –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´ (3 —Ñ–∞–π–ª–∞)

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç–∞—Ç—É—Å |
|------|-----------|--------|
| [src/QIMy.Core/Entities/ExpenseInvoice.cs](src/QIMy.Core/Entities/ExpenseInvoice.cs) | + PersonenIndexEntryId FK<br/>+ PersonenIndexEntry navigation | ‚úÖ |
| [src/QIMy.Core/Entities/Invoice.cs](src/QIMy.Core/Entities/Invoice.cs) | + PersonenIndexEntryId FK<br/>+ PersonenIndexEntry navigation | ‚úÖ |
| [src/QIMy.Infrastructure/Data/ApplicationDbContext.cs](src/QIMy.Infrastructure/Data/ApplicationDbContext.cs) | + DbSet\<PersonenIndexEntry\> | ‚úÖ |

### ‚úÖ –ú–ò–ì–†–ê–¶–ò–ò (1 –º–∏–≥—Ä–∞—Ü–∏—è)

| –ú–∏–≥—Ä–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|--------|---------|
| **20260124163812_PersonenIndexIntegration_ER_AR_Links** | ‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–ê | –°–æ–∑–¥–∞–µ—Ç PersonenIndexEntries —Ç–∞–±–ª–∏—Ü—É, –¥–æ–±–∞–≤–ª—è–µ—Ç FK –≤ ER/AR |

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Star Schema (–ó–≤–µ–∑–¥–Ω–∞—è —Å—Ö–µ–º–∞)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  PersonenIndexEntry     ‚îÇ ‚Üê –¶–µ–Ω—Ç—Ä —Å–∏—Å—Ç–µ–º—ã
‚îÇ  (–†–µ–µ—Å—Ç—Ä –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ           ‚îÇ
    ‚ñº           ‚ñº
  ER (–≤—Ö–æ–¥—è—â–∏–µ) AR (–∏—Å—Ö–æ–¥—è—â–∏–µ)
    ‚îÇ           ‚îÇ
    ‚ñº           ‚ñº
  ExpenseInvoice  Invoice
```

### –ö–ª—é—á–µ–≤—ã–µ —Å–≤—è–∑–∏

```sql
-- ER (ExpenseInvoice)
ALTER TABLE ExpenseInvoices ADD
  PersonenIndexEntryId INT FOREIGN KEY REFERENCES PersonenIndexEntries(Id)

-- AR (Invoice)
ALTER TABLE Invoices ADD
  PersonenIndexEntryId INT FOREIGN KEY REFERENCES PersonenIndexEntries(Id)
```

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

### 1. Single Source of Truth (SSoT)
```
–ê–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ ‚Üí —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –û–î –º–µ—Å—Ç–µ (PersonenIndexEntry)
                 ‚Üí –≤—Å–µ —Å—á–µ—Ç–∞ –±–µ—Ä—É—Ç –æ—Ç—Å—é–¥–∞
                 ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ ‚Üí –≤—Å–µ —Å—á–µ—Ç–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
```

### 2. TAG - –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
```
–í–º–µ—Å—Ç–æ –∫–æ–¥–∞:  300151
–ò—Å–ø–æ–ª—å–∑—É–µ–º:   MonoOst (–ø–µ—Ä–≤—ã–µ 5 –±—É–∫–≤ –∫–æ–º–ø–∞–Ω–∏–∏)
–†–µ–∑—É–ª—å—Ç–∞—Ç:    –ë—ã—Å—Ç—Ä—ã–π –∏ –±–µ–∑–æ—à–∏–±–æ—á–Ω—ã–π –≤–≤–æ–¥
```

### 3. CountryCode ‚Üí –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–æ–≥
```
PersonenIndexEntry.CountryCode = "DE"
  ‚Üí EU-RATE["DE"].StandardRate = 19%
  ‚Üí –ü—Ä–∏–º–µ–Ω—è–µ–º 19% –ù–î–°

PersonenIndexEntry.CountryCode = "CH"
  ‚Üí EU-RATE["CH"].StandardRate = 0%
  ‚Üí –†–µ–≤–µ—Ä—Å –ù–î–° (–≤–Ω–µ –ï–°)
```

### 4. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—á–µ—Ç–∞
```
SuggestedExpenseAccountId = 5030  (–¥–ª—è ER - –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏)
SuggestedIncomeAccountId = 4001   (–¥–ª—è AR - –∫–ª–∏–µ–Ω—Ç—ã)
```

### 5. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤
```
Kto-Nr –∫–æ–¥–∏—Ä—É–µ—Ç —Ç–∏–ø:
  200000-299999 ‚Üí Customer (—Ç–æ–ª—å–∫–æ AR)
  300000-399999 ‚Üí Supplier (—Ç–æ–ª—å–∫–æ ER)
  400000-499999 ‚Üí Both (AR + ER –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
```

---

## üìà –¢–∞–±–ª–∏—Ü–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã PersonenIndexEntry

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|------|-----|---------|---------|
| **KtoNr** | string | –ù–æ–º–µ—Ä —Å—á–µ—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π) | 300151 |
| **TAG** | string | –ö—Ä–∞—Ç–∫–∞—è –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä–∞ (—É–Ω–∏–∫–∞–ª—å–Ω–∞—è) | MonoOst |
| **CompanyName** | string | –ü–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏ | Monolith Ost GmbH |
| **ContactPerson** | string? | –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ | Max M√ºller |
| **Email** | string? | Email –∞–¥—Ä–µ—Å | info@monolith-ost.de |
| **Phone** | string? | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ | +49 30 12345678 |
| **Address** | string? | –ê–¥—Ä–µ—Å | Alexanderplatz 1, 10178 Berlin |
| **CountryCode** | string | ISO –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–æ–≥!) | DE |
| **UIDNumber** | string? | VAT ID (–¥–ª—è –Ω–∞–ª–æ–≥–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤) | DE123456789 |
| **SuggestedExpenseAccountId** | int? | –°—á–µ—Ç –¥–ª—è ER (–ø–æ—Å—Ç–∞–≤—â–∏–∫–∏) | 5030 |
| **SuggestedIncomeAccountId** | int? | –°—á–µ—Ç –¥–ª—è AR (–∫–ª–∏–µ–Ω—Ç—ã) | 4001 |
| **ContractorType** | enum | Customer/Supplier/Both | Supplier |
| **Status** | enum | Active/Inactive/Pending/Blocked | Active |

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### –í—Ö–æ–¥—è—â–∏–π —Å—á–µ—Ç (ER)
```
1. –°—á–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Ç Monolith Ost GmbH
2. –í–≤–æ–¥–∏–º TAG: "MonoOst"
3. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç PersonenIndexEntry –ø–æ TAG
4. –ü–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç:
   - CompanyName (–¥–ª—è –ø–µ—á–∞—Ç–∏)
   - Address (–¥–ª—è –ø–µ—á–∞—Ç–∏)
   - CountryCode: "DE" (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–æ–≥!)
   - UIDNumber (–¥–ª—è –Ω–∞–ª–æ–≥–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)
   - SuggestedExpenseAccountId: 5030 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—á–µ—Ç)
5. –°–º–æ—Ç—Ä–∏—Ç –≤ EU-RATE –ø–æ CountryCode = "DE"
6. –ù–∞—Ö–æ–¥–∏—Ç StandardRate = 19%
7. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞–ª–æ–≥: –°—É–º–º–∞ √ó 19%
8. –°–æ–∑–¥–∞–µ—Ç —Å—á–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–∞–ª–æ–≥–æ–º
```

### –ò—Å—Ö–æ–¥—è—â–∏–π —Å—á–µ—Ç (AR)
```
1. –í—ã—Å—Ç–∞–≤–ª—è–µ–º —Å—á–µ—Ç –∫–ª–∏–µ–Ω—Ç—É Acme Corp (–®–≤–µ–π—Ü–∞—Ä–∏—è)
2. –í–≤–æ–¥–∏–º TAG: "AcmeCor"
3. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç PersonenIndexEntry
4. –í–∏–¥–∏—Ç CountryCode: "CH" (–®–≤–µ–π—Ü–∞—Ä–∏—è, –≤–Ω–µ –ï–°!)
5. –°–º–æ—Ç—Ä–∏—Ç –≤ EU-RATE –ø–æ CountryCode = "CH"
6. –ù–∞—Ö–æ–¥–∏—Ç StandardRate = 0%
7. –í–ù–ò–ú–ê–ù–ò–ï: –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ä–µ–≤–µ—Ä—Å –ù–î–° (0% –Ω–∞–ª–æ–≥!)
8. –°–æ–∑–¥–∞–µ—Ç —Å—á–µ—Ç –ë–ï–ó –Ω–∞–ª–æ–≥–∞ —Å –ø–æ–º–µ—Ç–∫–æ–π "Reverse VAT"
```

---

## ‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏
```
‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω —É—Å–ø–µ—à–Ω–æ
‚úÖ 0 –æ—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
‚úÖ 0 warnings
‚úÖ –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: 1.37 —Å–µ–∫

–ü—Ä–æ–µ–∫—Ç—ã:
  ‚úÖ QIMy.Core
  ‚úÖ QIMy.Application
  ‚úÖ QIMy.Infrastructure
  ‚úÖ QIMy.API
  ‚úÖ QIMy.Web
```

### –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏
```
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞: 20260124163812_PersonenIndexIntegration_ER_AR_Links
‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î
‚úÖ –¢–∞–±–ª–∏—Ü–∞ PersonenIndexEntries —Å–æ–∑–¥–∞–Ω–∞
‚úÖ Foreign Keys –¥–æ–±–∞–≤–ª–µ–Ω—ã
‚úÖ –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
```

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (1000+ —Å—Ç—Ä–æ–∫)

| –î–æ–∫—É–º–µ–Ω—Ç | –°—Ç—Ä–æ–∫ | –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ |
|----------|-------|-----------|
| [docs/PERSONEN_INDEX_ER_AR_ARCHITECTURE.md](docs/PERSONEN_INDEX_ER_AR_ARCHITECTURE.md) | 260 | –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –¥–∏–∞–≥—Ä–∞–º–º—ã, SQL –ø—Ä–∏–º–µ—Ä—ã |
| [PERSONEN_INDEX_IMPLEMENTATION_COMPLETE.md](PERSONEN_INDEX_IMPLEMENTATION_COMPLETE.md) | 320 | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, –ø—Ä–∏–º–µ—Ä—ã, roadmap –Ω–∞ –±—É–¥—É—â–µ–µ |
| [PERSONEN_INDEX_QUICK_REFERENCE.md](PERSONEN_INDEX_QUICK_REFERENCE.md) | 140 | –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ |
| [ARCHITECTURE_DIAGRAM_PERSONEN_INDEX.txt](ARCHITECTURE_DIAGRAM_PERSONEN_INDEX.txt) | 400 | ASCII –¥–∏–∞–≥—Ä–∞–º–º—ã, –ø—Ä–∏–º–µ—Ä—ã data flow |
| [SESSION_REPORT_PERSONEN_INDEX_ARCHITECTURE_20260124.md](SESSION_REPORT_PERSONEN_INDEX_ARCHITECTURE_20260124.md) | 300+ | –ü–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ |

**–ò—Ç–æ–≥–æ:** 1300+ —Å—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏!

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ (–§–∞–∑–∞ 2)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (–í–´–°–û–ö–ò–ô)
```bash
# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ Personen Index.xlsx
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è: src/QIMy.Infrastructure/Services/PersonenIndexImportService.cs

# –ú–∞–ø–ø–∏–Ω–≥ –ø–æ–ª–µ–π:
Excel ‚Üí PersonenIndexEntry
  Kto-Nr         ‚Üí KtoNr
  Nachname       ‚Üí CompanyName
  Vorname        ‚Üí ContactPerson
  Freifeld 01    ‚Üí CountryCode
  UID-Nummer     ‚Üí UIDNumber
  Lief-Vorschlag ‚Üí SuggestedExpenseAccountId
  Kunden-Vorschlag ‚Üí SuggestedIncomeAccountId
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: API endpoints (–°–†–ï–î–ù–ò–ô)
```csharp
[ApiController]
[Route("api/personen-index")]
public class PersonenIndexController
{
    [HttpGet("search/{tag}")]
    public async Task<PersonenIndexEntryDto> Search(string tag);

    [HttpGet("{id}")]
    public async Task<PersonenIndexEntryDto> GetById(int id);

    [HttpPost]
    public async Task<PersonenIndexEntryDto> Create(CreatePersonenIndexEntryDto dto);

    [HttpPut("{id}")]
    public async Task<PersonenIndexEntryDto> Update(int id, UpdatePersonenIndexEntryDto dto);

    [HttpDelete("{id}")]
    public async Task<bool> Delete(int id);
}
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: UI —Ñ–æ—Ä–º—ã (–°–†–ï–î–ù–ò–ô)
```javascript
// –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –≤–≤–æ–¥–µ TAG –≤ —Ñ–æ—Ä–º–µ ER/AR:
// ‚Ä¢ –ö–æ–º–ø–∞–Ω–∏—è
// ‚Ä¢ –ê–¥—Ä–µ—Å
// ‚Ä¢ Email/–¢–µ–ª–µ—Ñ–æ–Ω
// ‚Ä¢ –ù–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞
// ‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å—á–µ—Ç
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –í–∞–ª–∏–¥–∞—Ü–∏—è (–ù–ò–ó–ö–ò–ô)
```csharp
// –í–∞–ª–∏–¥–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏:
// ‚Ä¢ KtoNr –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
// ‚Ä¢ TAG –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º
// ‚Ä¢ CountryCode –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ
```

---

## üéì –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è

### ‚úÖ Personen Index = –¶–µ–Ω—Ç—Ä —Å–∏—Å—Ç–µ–º—ã
–í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ –Ω–µ–≥–æ. –ù–µ –¥—É–±–ª–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ!

### ‚úÖ TAG = –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫
–í–º–µ—Å—Ç–æ –∫–æ–¥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π TAG (5 –±—É–∫–≤ –ø–µ—Ä–≤—ã—Ö –±—É–∫–≤ –∫–æ–º–ø–∞–Ω–∏–∏).

### ‚úÖ CountryCode = –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–ª–æ–≥
–°–∏—Å—Ç–µ–º–∞ –í–°–ï–ì–î–ê —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω—É –¥–ª—è –Ω–∞–ª–æ–≥–∞. –≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!

### ‚úÖ SuggestedAccounts = UI –ø–æ–º–æ—â–Ω–∏–∫
–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å—á–µ—Ç. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å.

### ‚úÖ ContractorType.Both = –î–≤–æ–π–Ω–∞—è —Ä–æ–ª—å
–ú–æ–∂–µ—Ç –±—ã—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–º –ò –∫–ª–∏–µ–Ω—Ç–æ–º (Kto-Nr 4xxxxx).

---

## üèÜ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- ‚úÖ Entity PersonenIndexEntry —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ ExpenseInvoice –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (FK + Navigation)
- ‚úÖ Invoice –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (FK + Navigation)
- ‚úÖ ApplicationDbContext –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (DbSet –¥–æ–±–∞–≤–ª–µ–Ω)
- ‚úÖ Migration —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ë–î
- ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫ (0 errors, 0 warnings)
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –î–∏–∞–≥—Ä–∞–º–º—ã –∏ –ø—Ä–∏–º–µ—Ä—ã –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã
- ‚úÖ Quick reference —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- ‚úÖ Roadmap –Ω–∞ –±—É–¥—É—â–µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| **–ù–æ–≤—ã—Ö Entity** | 1 (PersonenIndexEntry) |
| **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö Entity** | 2 (ExpenseInvoice, Invoice) |
| **–ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π** | 2 (ContractorType, ContractorStatus) |
| **–ù–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** | 5 |
| **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (Entity)** | 203 |
| **–°—Ç—Ä–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** | 1300+ |
| **–ü—Ä–∏–º–µ—Ä–æ–≤ –∫–æ–¥–∞** | 8+ |
| **–î–∏–∞–≥—Ä–∞–º–º** | 10+ |
| **–í—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** | ~4 —á–∞—Å–∞ |
| **–û—à–∏–±–æ–∫ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏** | 0 |
| **Warnings** | 0 |

---

## üéØ –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   PERSONEN INDEX ER/AR –°–ò–°–¢–ï–ú–ê  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:        ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ‚îÇ
‚îÇ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:         ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ‚îÇ
‚îÇ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:       ‚≠ê‚≠ê‚≠ê‚≠ê ‚îÇ
‚îÇ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:       ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ‚îÇ
‚îÇ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:         ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê:       ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê ‚îÇ
‚îÇ                     –û–¢–õ–ò–ß–ù–û!    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Personen Index ER/AR –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

### –ß—Ç–æ –±—ã–ª–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:
- ‚úÖ –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ Star Schema –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ PersonenIndexEntries (—Ä–µ–µ—Å—Ç—Ä –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã ExpenseInvoice (ER) –∏ Invoice (AR) —Å —Ä–µ–µ—Å—Ç—Ä–æ–º
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ª–æ–≥–æ–≤ –ø–æ —Å—Ç—Ä–∞–Ω–µ
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã—Ö —Å—á–µ—Ç–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (1300+ —Å—Ç—Ä–æ–∫)
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
- ‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫

### –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ:
- **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã** - –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- **–ë—ã—Å—Ç—Ä—ã–π –≤–≤–æ–¥** - —á–µ—Ä–µ–∑ TAG (5 –±—É–∫–≤ –≤–º–µ—Å—Ç–æ –∫–æ–¥–æ–≤)
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ª–æ–≥–∏** - –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ —Å—Ç—Ä–∞–Ω–µ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞
- **–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å—á–µ—Ç–æ–≤** - —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Å—á–µ—Ç–∞
- **–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ —Ä–µ–µ—Å—Ç—Ä–µ ‚Üí –≤—Å–µ —Å—á–µ—Ç–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

### –ì–æ—Ç–æ–≤–æ –∫:
- –ò–º–ø–æ—Ä—Ç—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ Personen Index.xlsx
- –°–æ–∑–¥–∞–Ω–∏—é API endpoints
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å UI —Ñ–æ—Ä–º–∞–º–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 24 —è–Ω–≤–∞—Ä—è 2026
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ**
**–í–µ—Ä—Å–∏—è:** 1.0
**–°–±–æ—Ä–∫–∞:** ‚úÖ **0 –û–®–ò–ë–û–ö, 0 WARNING**
